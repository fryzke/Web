# 개요

html, javascript, java, servlet 등을 활용하여 쇼핑몰 홈페이지를 구현한다.  

## 목표  
실제 웹에 퍼블리싱 되고 있는 웹의 기능을 최대한 많이 구현한다.  
기능 구현에 더욱 시간을 투자하기 위해 CSS는 무료로 공개되어있는 CSS 템플릿이나 부트스트랩과 같은 오픈 소스를 활용하는 방향으로 설정하였다.  

개발환경  
	OS : window 10  
	IDE : eclipse  
	tomcat 버전 : 8.5  
	java 버전 : 11  
	사용 DB : postgresql  

# 주요기능
## 메인 페이지  
1. 로그인 : 사람 모양 아이콘을 누르면, session에 변수 id가 null이 아닐 경우 Mypage.jsp로, id가 null이면 log-in.jsp로 넘어간다.  
만약 id가 admin일 경우에는 마이페이지가 아닌, adminpage.jsp로 연결된다.  

2. 장바구니 : 상품 상세 페이지에서 장바구니 버튼을 통해 선택한 상품 목록을 확인할 수 있는 페이지로 넘어간다. 만약 로그인이 되어있지 않을 경우 경고 문구와 함께 로그인 페이지로 넘어간다.  

3. 메뉴바 : TOY/SNACK/CARE/HEALTH/Q&A가 존재하고 왼쪽부터 health까지는 각 카테고리에 해당하는 이름을 category변수로 넘겨받아 itempage.jsp에 전달하여 각 카테고리에 맞는 테이블 데이터를 DB에서 불러와 상품을 보여준다.  
Q&A는 질문 게시판으로 board.jsp로 넘어간다.

4. 상품 리스트 : 메인 페이지에서 보여지는 상품 리스트이다. 가장 처음 나오는 카테고리인 TOY 카테고리의 상품을 보여준다.

5. 로그아웃 : session에 변수 id가 null이 아닐 경우 장바구니 옆에 생긴다. 누르면 logout.jsp에서 로그아웃이 진행된 후 메인 페이지로 이동한다.

## 로그인 페이지
아이디, 비밀번호를 입력하고 로그인 버튼을 누르면 login_process.jsp에서 로그인 폼을 통해 전달된 아이디와 비밀번호를 db의 account 테이블에서 조회해서 존재하는지 확인한다.  
만약 존재하면 id를 세션에 저장하고 메인 페이지로 돌아간다. 아이디 혹은 비밀번호가 일치하는 것이 없으면 경고창과 함께 다시 로그인 페이지로 되돌아간다.  
로그인 페이지에서도 로그인 버튼 아래에 존재하는 회원가입 링크를 누르면 회원가입 페이지로 넘어갈 수 있다.  
## 로그아웃 페이지  
로그아웃 링크를 누르면 logout.jsp로 이동한다. 저장된 모든 세션값을 session.invalidate()를 통해 삭제하고 로그아웃 하였다는 메세지와 함께 main.jsp로 넘어간다.  
## 회원가입 페이지
signUp.jsp에서 회원가입 폼을 전부 작성하고 가입 버튼을 누르면 insertDB.jsp로 해당 값이 전달되어 DB의 account table에 삽입을 시도한다. 만약 이미 존재하는 데이터이거나 한 항목이라도 오류가 있는 경우에 대비해 cnt 변수를 통해 삽입 성공 여부를 확인한다.  
cnt 변수가 1이면 가입성공 메시지와 함께 로그인 페이지로 넘어가며 0일 경우 가입 실패메시지와 함께 다시 회원가입 페이지로 돌아간다.  
## 마이페이지
회원 아이디, 포인트, 주문건수가 표시되며 왼쪽에는 회원 정보, 장바구니, 회원탈퇴 페이지로 이동할 수 있는 navigator가 있다.  
장바구니를 클릭하면 장바구니 페이지로 이동하며, 회원탈퇴를 클릭하면 회원 탈퇴 페이지로 넘어간다. 회원 탈퇴페이지에서는 아이디 입력 후 데이터 베이스 조회를 통해 회원 탈퇴 성공 여부를 알려준다.  
성공하면 db에서 해당 아이디와 일치하는 항목이 사라진다.  
## 상품 페이지
메뉴바 링크에서 전달받은 category 변수를 통해 해당 db table에 접근하여 상품을 출력한다. 각 개별이미지는 준비하지 못하여 전원 같은 이미지를 사용하고 있다.  
이미지, 상품명, 상품 가격이 표시되며 해당 부분을 클릭하면 해당하는 상품의 상세페이지로 이동한다.  
## 상품 상세 페이지 
상품페이지에서 전달받은 category, itemid 변수를 통해 데이터 베이스에서 해당 데이터를 불러와 페이지에 표시한다.   
상품코드(itemid), 상품명, 상품가격과 이미지가 표시되며 아래는 구매 수량을 결정할 수 있는 칸과 장바구니 버튼이 있다.  
장바구니 버튼을 누르면 수량과 함께 고객이 장바구니에 담으려는 상품 정보들을 item_list라는 item_db배열 객체에 저장하여 session에 cartlist라는 변수로 저장한다.  
이 기능은 addcart 서블릿을 통해 구현하였으며 item_db는 상품의 dto, item_listing은 상품의 dao이다.  
## 장바구니
session에서 cartlist를 불러와 테이블 형태로 표시한다. 각 상품의 가격을 합하여 총 금액 옆에 표시하고 고객이 현재 보유한 포인트를 사용하여 총 금액을 낮출 수 있다.  
포인트는 텍스트 타입의 input 태그에 입력할 수 있으며 사용하기 버튼을 통해 총 금액을 사용한 포인트만큼 차감한 가격으로 바꾼다. 되돌리기 버튼을 누르면 포인트를 사용하기 전 가격으로 돌아간다.  
구매하기 버튼을 누르면 purchasing 서블릿으로 넘어가며 이곳에서 구매한 아이템들의 재고를 구매한 수량만큼 감소시킨 값으로 업데이트 하고, 고객의 포인트 또한 사용한 만큼 차감하여 업데이트 한다.  
마지막으로 고객의 아이디와 고객이 구매한 물품 목록과 배송지 정보를 shipping_stat 테이블에 삽입한다.  
해당 과정이 끝나면 구매완료 메시지와 함께 다시 장바구니 페이지로 돌아간다.  
장바구니는 장바구니 삭제하기 버튼을 통해 장바구니를 비울 수 있다.  
delete_cart.jsp에서 session에서 cartlist를 삭제하고 cart.jsp로 이동하는 방식으로 구현하였다.  
## 게시판 페이지
게시판과 DB의 상호작용은 board_db와 board_listing이 두 java 파일을 통해 이루어진다.  
board_db.java는 게시글 dto이며 데이터 베이스와의 상호작용은 board_listing.java를 통해 이루어진다.  
고객이 작성한 질문글을 확인할 수 있다. 게시글은 DB의 customer_log 테이블로부터 불러오며 한 페이지에 게시글은 최대 10개까지 표시된다. 그 이상은 이전/다음 버튼을 통하여 새로이 로드해 온다.  
글쓰기 기능은 글쓰기 버튼을 눌러 write_log.jsp로 넘어가는 것으로 할 수 있으며 이는 로그인한 상태에서만 이용할 수 있다.  
## 관리자 페이지
지금까지 진행되거나 진행해야할 배송 건수를 전체적으로 확인 할 수 있으며 아래로 회원 리스트가 테이블 형태로 표시된다.    
## 계획대로 구현한 부분  
처음에 만들고자 하였던 페이지는 일부 기능을 제외하고 모두 구현하였으며 이전에 구상한 레이아웃에 최대한 맞추어서 홈페이지를 만들었다.  
## 계획대로 구현하지 못한 부분  
1. 광고 배너에서 상품 페이지로 이동하는 부분은 구현하지 못하였다.  
2. 게시물 검색기능은 구현하지 못하였다.  
3. 상품 구매를 상품페이지에서 결정하는 것이 아닌 장바구니에서 일괄적으로 구매 선택하게 되었다.  
또한 관리자 페이지에서는 기존에 계획했던 기능들은 시간 부족으로 구현하지 못하였고 고객 리스트와 배송현황만 확인할 수 있는 형태가 되었다.  
## 새로이 추가된 부분
기존에는 없던 장바구니 시스템과 게시판 페이지에 게시글 작성 기능이 추가되었다.
또 마이페이지에서 회원탈퇴기능이 추가 되었으며 DB 구성 또한 구현한 홈페이지의 데이터에 맞게 수정되었다.
item_list table은 카테고리 별로 따로 나누어 생성하였고 customer_log 테이블과 shipping_stat 테이블은 userid를 외부키로 참조하며 userid가 업데이트 혹은 삭제 되면 따라 변경되도록 설정하였다.


# 보완할 점
페이지의 디자인적인 부분은 거의 신경쓰지 못하였으므로 좀 더 보기 쉽고, 사용하기 편하게 개선하고 싶다. 가장 눈에 잘 들어와야 하는 홈페이지의 로고가 메뉴바의 크기보다 작아 눈에 띄지 않는 부분과 모든 블록들이 여유공간 없이 붙어있어 답답한 느낌을 주는 것이 대표적이다.  
또한 뒤로가기 버튼을 구현하지 못하여서 일부 페이지에서는 브라우저 뒤로가기 기능만을 이용할 수 있다는 단점이 있다.   
데이터 베이스를 조금 더 보완하여 상품의 이미지를 같이 저장하거나 주문 현황에 총 주문 금액까지 표시되도록 하고 싶다.  


